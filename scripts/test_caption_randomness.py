#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
æµ‹è¯•é…æ–‡éšæœºæ€§
"""

import random

def generate_smart_caption(scene: str = "", emotion: str = "", makeup: str = "", art_style: str = "") -> str:
    """
    æ™ºèƒ½ç”Ÿæˆé…æ–‡ - æ ¹æ®å›¾ç‰‡å‚æ•°åŠ¨æ€ç”Ÿæˆ
    ä¸å†å—æ˜ŸæœŸå‡ é™åˆ¶ï¼Œå®Œå…¨éšæœºä¸”ä¸å›¾ç‰‡å†…å®¹åŒ¹é…
    """

    # å¤§å‹é…æ–‡åº“ - æŒ‰æƒ…ç»ªå’Œåœºæ™¯åˆ†ç±»
    captions = {
        "æŒ‘é€—": [
            "ä¸€çœ¼å¿ƒåŠ¨ï¼Œå†æ²¦é™·ã€‚",
            "è¿·äººæ— éœ€å¤šè¨€ï¼Œçœ‹å°±å¤Ÿäº†ã€‚",
            "çœ¼ç¥ä¼šè¯´è¯ï¼Œä½ å¬åˆ°äº†å—ï¼Ÿ",
            "å±é™©åˆè¿·äººçš„è·ç¦»ã€‚",
            "è¿™ä¸€åˆ»çš„å¸å¼•åŠ›ï¼Œè‡´å‘½ã€‚",
            "é£æƒ…ä¸‡ç§ï¼Œä¸è¿‡å¦‚æ­¤ã€‚",
            "ä¸ç”¨åˆ»æ„ï¼Œå°±å¾ˆå‹¾äººã€‚"
        ],
        "å¿§éƒ": [
            "å­¤ç‹¬æ˜¯åä¸½çš„ã€‚",
            "æ¸©æŸ”é‡Œè—ç€å¿§ä¼¤ã€‚",
            "å®‰é™ä¸­ï¼Œæ•…äº‹åœ¨æµæ·Œã€‚",
            "çœ¼ä¸­æœ‰æµ·ï¼Œå¿ƒä¸­æœ‰æ•…äº‹ã€‚",
            "æ·¡ç„¶ï¼Œæ˜¯æœ€å¥½çš„ä¼ªè£…ã€‚",
            "æœ‰äº›è¯ï¼Œä¸ç”¨è¯´ã€‚",
            "æ²‰é»˜ï¼Œä¹Ÿæ˜¯ä¸€ç§è¡¨è¾¾ã€‚"
        ],
        "ç¥ç§˜": [
            "çœ‹ä¸é€ï¼Œæ‰æœ€è¿·äººã€‚",
            "çœ¼ç¥é‡Œï¼Œè—ç€æ•…äº‹ã€‚",
            "è‹¥å³è‹¥ç¦»ï¼Œæœ€æ˜¯æŠ“äººã€‚",
            "è°œä¸€æ ·çš„å­˜åœ¨ã€‚",
            "ä¿æŒè·ç¦»ï¼Œæ›´æœ‰é­…åŠ›ã€‚",
            "çŒœä¸é€çš„è°œé¢˜ã€‚",
            "è¶Šç¥ç§˜ï¼Œè¶Šæƒ³é è¿‘ã€‚"
        ],
        "å¼€å¿ƒ": [
            "ç¬‘å®¹æ˜¯æœ€å¥½çš„æ»¤é•œã€‚",
            "ä»Šå¤©çš„å¿«ä¹è¶…æ ‡äº†ã€‚",
            "é˜³å…‰ä¸‹çš„ç¬‘å®¹ï¼Œæ²»æ„ˆä¸€åˆ‡ã€‚",
            "ç¬‘ç€ï¼Œå°±å¾ˆç¾ã€‚",
            "å¿ƒæƒ…å†™åœ¨è„¸ä¸Šã€‚",
            "å…ƒæ°”æ»¡æ»¡çš„ä¸€å¤©ã€‚",
            "ä»Šå¤©ä¹Ÿå¾ˆå¼€å¿ƒå‘€ã€‚"
        ],
        "é€šç”¨": [
            "ä»Šæ—¥ä»½å¿ƒåŠ¨ç¬é—´ã€‚",
            "ç¾å¥½ï¼Œå€¼å¾—è¢«è®°å½•ã€‚",
            "æ¯ä¸€å¸§éƒ½æ˜¯å¿ƒåŠ¨ã€‚",
            "å®šæ ¼æ­¤åˆ»çš„ç¾å¥½ã€‚",
            "é‡è§ï¼Œå°±æ˜¯æœ€å¥½çš„å¼€å§‹ã€‚",
            "æ—¶å…‰ä¸è¯­ï¼Œå´ç»™äº†ç­”æ¡ˆã€‚",
            "å®‰é™åœ°å‘å…‰ã€‚",
            "ç¾å¥½ä»ä¸ç¼ºå¸­ã€‚",
            "ä»Šæ—¥ä»½ç¾å¥½å·²é€è¾¾ã€‚",
            "è¢«å…‰é€‰ä¸­çš„ä¸€å¤©ã€‚"
        ],
        "é›¨å¤œ": [
            "é›¨å¤œï¼Œæœ€é€‚åˆæƒ³å¿µã€‚",
            "éœ“è™¹ç¯ä¸‹çš„å­¤å•ã€‚",
            "é›¨ä¸­ï¼Œæ•…äº‹åœ¨å‘ç”Ÿã€‚",
            "æ½®æ¹¿çš„æƒ…ç»ªï¼Œè¢«é›¨æ·‹æ¹¿ã€‚",
            "é›¨å¤œï¼Œåˆ«æœ‰ä¸€ç•ªé£å‘³ã€‚",
            "æ¹¿æ¼‰æ¼‰çš„æ¸©æŸ”ã€‚"
        ]
    }

    # æ ¹æ®ä¼ å…¥çš„å‚æ•°é€‰æ‹©é…æ–‡
    if emotion and emotion in captions:
        # ä¼˜å…ˆä½¿ç”¨æƒ…ç»ªé…æ–‡
        return random.choice(captions[emotion])
    elif scene == "é›¨å¤œ":
        return random.choice(captions["é›¨å¤œ"])
    else:
        # ä½¿ç”¨é€šç”¨é…æ–‡
        return random.choice(captions["é€šç”¨"])


def test_randomness():
    """æµ‹è¯•éšæœºæ€§"""
    print("=" * 60)
    print("ğŸ§ª é…æ–‡éšæœºæ€§æµ‹è¯•")
    print("=" * 60)

    # æµ‹è¯•åŒä¸€å‚æ•°å¤šæ¬¡è¿è¡Œï¼ŒéªŒè¯éšæœºæ€§
    print("\nğŸ“Œ æµ‹è¯•1: å¿§éƒæƒ…ç»ª (5æ¬¡)")
    results = set()
    for i in range(5):
        caption = generate_smart_caption(emotion="å¿§éƒ")
        results.add(caption)
        print(f"   {i+1}. {caption}")

    unique_count = len(results)
    print(f"   â†’ 5æ¬¡ç”Ÿæˆäº† {unique_count} æ¡ä¸åŒé…æ–‡")
    if unique_count >= 3:
        print("   âœ… éšæœºæ€§è‰¯å¥½")
    else:
        print("   âš ï¸  éšæœºæ€§å¯èƒ½ä¸è¶³")

    # æµ‹è¯•ä¸åŒå‚æ•°
    print("\nğŸ“Œ æµ‹è¯•2: ä¸åŒæƒ…ç»ªå‚æ•°")
    print(f"   æŒ‘é€—: {generate_smart_caption(emotion='æŒ‘é€—')}")
    print(f"   å¿§éƒ: {generate_smart_caption(emotion='å¿§éƒ')}")
    print(f"   ç¥ç§˜: {generate_smart_caption(emotion='ç¥ç§˜')}")
    print(f"   å¼€å¿ƒ: {generate_smart_caption(emotion='å¼€å¿ƒ')}")

    # æµ‹è¯•åœºæ™¯å‚æ•°
    print("\nğŸ“Œ æµ‹è¯•3: åœºæ™¯å‚æ•°")
    print(f"   é›¨å¤œ: {generate_smart_caption(scene='é›¨å¤œ')}")
    print(f"   é€šç”¨: {generate_smart_caption()}")

    print("\n" + "=" * 60)
    print("âœ… æµ‹è¯•å®Œæˆï¼")
    print("   - é…æ–‡åŸºäºå‚æ•°ç”Ÿæˆï¼Œä¸å†æŒ‰æ˜ŸæœŸå‡ å›ºå®š")
    print("   - æ¯æ¬¡ç”Ÿæˆéšæœºé€‰æ‹©ï¼Œç¡®ä¿å¤šæ ·æ€§")
    print("=" * 60)


if __name__ == "__main__":
    test_randomness()
